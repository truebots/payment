  
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TrueBots</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <link rel="icon" href="img/Fevicon.png" type="image/png">
    <link rel="stylesheet" href="vendors/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="vendors/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="vendors/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="vendors/linericon/style.css">
    <link rel="stylesheet" href="vendors/owl-carousel/owl.theme.default.min.css">
    <link rel="stylesheet" href="vendors/owl-carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="vendors/nice-select/nice-select.css">
    <link rel="stylesheet" href="vendors/nouislider/nouislider.min.css">
    
    <link rel="stylesheet" href="css/style.css">
    <script  src="md5.js" type="text/javascript"></script>
    <script src="md5.pack.js" type="text/javascript"></script>




<script>
            (function(d, s, id){
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "https://connect.facebook.net/en_US/messenger.Extensions.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'Messenger'));


function obtenerValorParametro(sParametroNombre) {
          var sPaginaURL2 = decodeURIComponent(document.location.href);
          
          var sPaginaURL= sPaginaURL2.split("?");
          var sURLVariables = sPaginaURL[1].split('&');
            for (var i = 0; i < sURLVariables.length; i++) {
              var sParametro = sURLVariables[i].split('=');
              if (sParametro[0] == sParametroNombre) {
                return sParametro[1];
              }
      }
      return null;
      }


</script>



  </head>
  <body>
    <section class="wrapper">
      <div class="spinner">
        <i></i>
        <i></i>
        <i></i>
        <i></i>
        <i></i>
        <i></i>
        <i></i>
      </div>
    </section>
   
   

 <!--================Cart Area =================-->

 <section  style="float: center">    
                
                    <form method="post" action="https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/">
                      <input id="merchantId" name="merchantId"    type="hidden"  value="508029"   >
                      <input id="accountId" name="accountId"     type="hidden"  value="512321" >
                      <input id="description" name="description"   type="hidden"  value="Test PAYU"  >
                      <input id="referenceCode" name="referenceCode" type="hidden"  value="TestPayU" >
                      <input id="amount" name="amount"        type="hidden"  value="20000"   >
                      <input id="tax" name="tax"           type="hidden"  value="3193"  >
                      <input id="taxReturnBase" name="taxReturnBase" type="hidden"  value="16806" >
                      <input id="currency" name="currency"      type="hidden"  value="COP" >
                      <input id="signature" name="signature"     type="hidden"  value="7ee7cf808ce6a39b17481c54f2c57acc"  >
                      <input id="test" name="test"          type="hidden"  value="1" >
                      <input id="buyerEmail" name="buyerEmail"    type="hidden"  value="test@test.com" >
                      <input id="payerFullName" name="payerFullName"    type="hidden"  value="test@test.com" >
                      
                      <input id="confirmationUrl" name="confirmationUrl"    type="hidden"  value="http://www.test.com/confirmation" >
                      <input id="extra1" name="extra1"    type="hidden"  value="http://www.test.com/confirmation" >
                      <input id="extra2" name="extra2"    type="hidden"  value="http://www.test.com/confirmation" >
                      <input id="extra3" name="extra3"    type="hidden"  value="http://www.test.com/confirmation" >
                      
                      <input id="sub2" name="Submit"   type="hidden"    type="submit"  value="Enviar" >
                    </form>
                       


                </section> 
             
      <script src="md5.pack.js" type="text/javascript"></script>

      <script >

var query = {"e":obtenerValorParametro("extra")};
      var m= decodeURIComponent(atob(query.e).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
            var f=JSON.parse(m);
            var lista = document.getElementById("o1");
            console.log(f);
            var tax=(parseInt(f.tax)*parseInt(f.amount))/100;
            var amountcal=tax+parseInt(f.amount);
  
            
              
              ($.ajax({
                type: "GET",
                url: "https://us-central1-secure-potion-243418.cloudfunctions.net/ES-function-addPurchaseOrder?callback=?",
                data: {
                            extra: query.e
                            
                },
                dataType: "jsonp",
                crossDomain:true,
                        
                success: function(t) {
                  var query = {"e":obtenerValorParametro("extra")};
      var m= decodeURIComponent(atob(query.e).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
            var f=JSON.parse(m);
            console.log(f);
            var tax=(parseInt(f.tax)*parseInt(f.amount))/100;
            var amountcal=tax+parseInt(f.amount);
                    console.log(t);
                    document.getElementById("referenceCode").value = t.id;
                    var sig=f.apiKey+"~"+f.merchantId+"~"+t.id+"~"+amountcal+"~"+f.currency;
                    var signature=md5(sig);
                    console.log("sig-"+signature);
                    document.getElementById("signature").value = signature;
                    
                    
                  
          
       var fe=f.date.split("T");
      
      
var tax=(parseInt(f.tax)*parseInt(f.amount))/100;
var amountcal=tax+parseInt(f.amount);
document.getElementById("tax").value = tax;
document.getElementById("taxReturnBase").value = parseInt(f.amount);
document.getElementById("amount").value = amountcal;
                  
 
                    



                  
                  
                  
                  document.getElementById("merchantId").value = f.merchantId;
                  document.getElementById("accountId").value = f.accountId;
                  document.getElementById("description").value = f.description;
                  document.getElementById("currency").value = f.currency;
                  document.getElementById("buyerEmail").value = f.buyerEmail;
                  document.getElementById("payerFullName").value = f.payerFullName;
                  document.getElementById("confirmationUrl").value = f.confirmationUrl;
                  document.getElementById("extra1").value = f.googlesheetId;
                  document.getElementById("extra2").value = f.broadcastId;
                  document.getElementById("extra3").value = f.muserID+"-"+f.botId;
                  

                  document.getElementById("sub2").click();
 
       


                },
                error: function(t) {
                    console.log(t);
                    


                }
            }));
      
  
</script>



